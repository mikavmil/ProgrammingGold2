[gd_scene load_steps=9 format=3 uid="uid://ucegifhxt4j2"]

[ext_resource type="Script" path="res://Scripts/block.gd" id="1_7l5ea"]
[ext_resource type="Script" path="res://Scripts/BlockStateMachine/StateMachine.gd" id="2_bet67"]
[ext_resource type="Script" path="res://Scripts/BlockStateMachine/Controlled_State_Machine.gd" id="3_nvw4j"]
[ext_resource type="Script" path="res://Scripts/BlockStateMachine/Idle_state.gd" id="4_5yf36"]
[ext_resource type="Script" path="res://Scripts/BlockStateMachine/Moving_State.gd" id="5_ss0n8"]
[ext_resource type="Script" path="res://Scripts/BlockStateMachine/Falling_State.gd" id="6_ptxqs"]
[ext_resource type="Script" path="res://Scripts/BlockStateMachine/Stuck_State.gd" id="7_ad5r7"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_4qa8a"]
size = Vector2(64, 64)

[node name="Block" type="RigidBody2D" node_paths=PackedStringArray("state_machine")]
script = ExtResource("1_7l5ea")
state_machine = NodePath("StateMachine")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("RectangleShape2D_4qa8a")

[node name="Polygon2D" type="Polygon2D" parent="."]
position = Vector2(32, 32)
polygon = PackedVector2Array(-64, -64, 0, -64, 0, 0, -64, 0)

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("block")]
script = ExtResource("2_bet67")
block = NodePath("..")

[node name="Controlled" type="Node" parent="StateMachine" node_paths=PackedStringArray("idle_state", "block")]
script = ExtResource("3_nvw4j")
idle_state = NodePath("Idle")
block = NodePath("../..")

[node name="Idle" type="Node" parent="StateMachine/Controlled" node_paths=PackedStringArray("main_state_machine", "moving_state_machine", "falling_state_machine", "block")]
script = ExtResource("4_5yf36")
main_state_machine = NodePath("../..")
moving_state_machine = NodePath("../Moving")
falling_state_machine = NodePath("../../Falling")
block = NodePath("../../..")

[node name="Moving" type="Node" parent="StateMachine/Controlled" node_paths=PackedStringArray("main_state_machine", "idle_state_machine", "falling_state_machine", "block")]
script = ExtResource("5_ss0n8")
main_state_machine = NodePath("../..")
idle_state_machine = NodePath("../Idle")
falling_state_machine = NodePath("../../Falling")
block = NodePath("../../..")

[node name="Falling" type="Node" parent="StateMachine" node_paths=PackedStringArray("stuck_state", "block")]
script = ExtResource("6_ptxqs")
stuck_state = NodePath("../Stuck")
block = NodePath("../..")

[node name="Stuck" type="Node" parent="StateMachine" node_paths=PackedStringArray("block")]
script = ExtResource("7_ad5r7")
block = NodePath("../..")
